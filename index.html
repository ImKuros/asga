<script>
const game = document.getElementById("game");
const mainMsg = document.getElementById("main-msg");
let clickCount = 0;
let secretMode = false;
let interval;
let secretMsg;

let goldInterval; // GOLD HEARTS â€“ controla a apariÃ§Ã£o deles

function createHeart(isGold = false) {
    const heart = document.createElement("div");
    heart.classList.add("heart");

    let size = 30 + Math.random() * 30;
    heart.style.width = size + "px";
    heart.style.height = size + "px";
    heart.style.left = Math.random() * 90 + "%";
    heart.style.animationDuration = (3 + Math.random() * 3) + "s";

    // GOLD HEART APARENCE
    if (isGold) {
        heart.style.background = "gold";
        heart.style.filter = "drop-shadow(0 0 10px gold)";
    }

    heart.addEventListener("click", () => {
        createParticles(heart.offsetLeft, heart.offsetTop);
        heart.remove();

        if (isGold) {
            showGoldMessage();   // GOLD HEARTS â†’ mensagem especial
            return;
        }

        clickCount++;
        if (!secretMode && clickCount >= 5) {
            activateSecretMode();
        }
    });

    game.appendChild(heart);
    setTimeout(() => heart.remove(), 6000);
}

function createParticles(x, y) {
    for (let i = 0; i < 6; i++) {
        const p = document.createElement("div");
        p.classList.add("particle");
        p.style.left = x + (Math.random() * 30 - 15) + "px";
        p.style.top = y + (Math.random() * 30 - 15) + "px";
        game.appendChild(p);
        setTimeout(() => p.remove(), 600);
    }
}

function startNormalRain() {
    interval = setInterval(() => createHeart(), 400);
}

function activateSecretMode() {
    secretMode = true;
    clearInterval(interval);

    mainMsg.style.display = "none";

    secretMsg = document.createElement("div");
    secretMsg.innerHTML = "<h2 style='color:white; text-shadow:0 0 10px #ff4ec9;'>Modo Secreto Ativado: Tempestade de Amor ðŸ’–</h2>";
    secretMsg.style.position = "absolute";
    secretMsg.style.top = "10px";
    secretMsg.style.width = "100%";
    secretMsg.style.textAlign = "center";
    secretMsg.style.animation = "fadeIn 1s ease";
    document.body.appendChild(secretMsg);

    interval = setInterval(() => {
        for (let i = 0; i < 6; i++) createHeart();
    }, 150);

    // GOLD HEARTS â€“ comeÃ§a apÃ³s 5 segundos
    setTimeout(() => startGoldHearts(), 5000);
}

function startGoldHearts() {
    goldInterval = setInterval(() => {
        // Cria um OU ZERO coraÃ§Ãµes dourados (aleatÃ³rio)
        if (Math.random() < 0.35) { 
            createHeart(true); // coraÃ§Ã£o dourado
        }
    }, 1200 + Math.random() * 1500); 
}

// MENSAGEM ESPECIAL DO CORAÃ‡ÃƒO DOURADO
function showGoldMessage() {
    const msg = document.createElement("div");
    msg.innerHTML = `
        <div style="
            position: absolute;
            top: 40%;
            width: 100%;
            text-align: center;
            color: gold;
            font-size: 20px;
            font-weight: 700;
            text-shadow: 0 0 8px gold;
            animation: fadeIn 0.5s ease;
        ">
            âœ¨ VocÃª achou um coraÃ§Ã£o raro...  
            <br>Isso significa que vocÃª Ã© especial pra mim. âœ¨
        </div>
    `;
    document.body.appendChild(msg);

    setTimeout(() => msg.remove(), 2600);
}

startNormalRain();

document.getElementById("restart").onclick = () => {
    game.innerHTML = "";
    clickCount = 0;

    clearInterval(interval);
    clearInterval(goldInterval); // GOLD HEARTS â€“ parar tambÃ©m

    if (secretMsg) secretMsg.remove();
    mainMsg.style.display = "block";

    secretMode = false;
    startNormalRain();
};
</script>
